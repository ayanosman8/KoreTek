{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/ayanosman/dev-portfolio/estimator/lib/ai/openrouter.ts"],"sourcesContent":["/**\n * OpenRouter AI Client\n * Supports multiple models: Claude, GPT-4, Gemini, etc.\n */\n\nconst OPENROUTER_API_KEY = process.env.OPENROUTER_API_KEY || \"\";\nconst OPENROUTER_API_URL = \"https://openrouter.ai/api/v1/chat/completions\";\n\nexport interface OpenRouterMessage {\n  role: \"system\" | \"user\" | \"assistant\";\n  content: string;\n}\n\nexport interface OpenRouterOptions {\n  model?: string;\n  temperature?: number;\n  max_tokens?: number;\n}\n\n/**\n * Call OpenRouter API with any model\n */\nexport async function callOpenRouter(\n  messages: OpenRouterMessage[],\n  options: OpenRouterOptions = {}\n) {\n  const {\n    model = \"anthropic/claude-3.5-sonnet\", // Default to Claude 3.5 Sonnet\n    temperature = 0.7,\n    max_tokens = 4096,\n  } = options;\n\n  const response = await fetch(OPENROUTER_API_URL, {\n    method: \"POST\",\n    headers: {\n      Authorization: `Bearer ${OPENROUTER_API_KEY}`,\n      \"Content-Type\": \"application/json\",\n      \"HTTP-Referer\": process.env.NEXT_PUBLIC_SITE_URL || \"http://localhost:3001\",\n      \"X-Title\": \"KoreTek Project Estimator\",\n    },\n    body: JSON.stringify({\n      model,\n      messages,\n      temperature,\n      max_tokens,\n    }),\n  });\n\n  if (!response.ok) {\n    const error = await response.text();\n    throw new Error(`OpenRouter API error: ${error}`);\n  }\n\n  const data = await response.json();\n  return data.choices[0]?.message?.content || \"\";\n}\n\n/**\n * Available models on OpenRouter\n */\nexport const MODELS = {\n  // Claude models (Anthropic)\n  CLAUDE_35_SONNET: \"anthropic/claude-3.5-sonnet\",\n  CLAUDE_3_OPUS: \"anthropic/claude-3-opus\",\n  CLAUDE_3_HAIKU: \"anthropic/claude-3-haiku\",\n\n  // GPT models (OpenAI)\n  GPT_4_TURBO: \"openai/gpt-4-turbo\",\n  GPT_4: \"openai/gpt-4\",\n  GPT_35_TURBO: \"openai/gpt-3.5-turbo\",\n\n  // Google models\n  GEMINI_PRO: \"google/gemini-pro\",\n\n  // Meta models\n  LLAMA_2_70B: \"meta-llama/llama-2-70b-chat\",\n} as const;\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;AAED,MAAM,qBAAqB,QAAQ,GAAG,CAAC,kBAAkB,IAAI;AAC7D,MAAM,qBAAqB;AAgBpB,eAAe,eACpB,QAA6B,EAC7B,UAA6B,CAAC,CAAC;IAE/B,MAAM,EACJ,QAAQ,6BAA6B,EACrC,cAAc,GAAG,EACjB,aAAa,IAAI,EAClB,GAAG;IAEJ,MAAM,WAAW,MAAM,MAAM,oBAAoB;QAC/C,QAAQ;QACR,SAAS;YACP,eAAe,CAAC,OAAO,EAAE,oBAAoB;YAC7C,gBAAgB;YAChB,gBAAgB,6DAAoC;YACpD,WAAW;QACb;QACA,MAAM,KAAK,SAAS,CAAC;YACnB;YACA;YACA;YACA;QACF;IACF;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,QAAQ,MAAM,SAAS,IAAI;QACjC,MAAM,IAAI,MAAM,CAAC,sBAAsB,EAAE,OAAO;IAClD;IAEA,MAAM,OAAO,MAAM,SAAS,IAAI;IAChC,OAAO,KAAK,OAAO,CAAC,EAAE,EAAE,SAAS,WAAW;AAC9C;AAKO,MAAM,SAAS;IACpB,4BAA4B;IAC5B,kBAAkB;IAClB,eAAe;IACf,gBAAgB;IAEhB,sBAAsB;IACtB,aAAa;IACb,OAAO;IACP,cAAc;IAEd,gBAAgB;IAChB,YAAY;IAEZ,cAAc;IACd,aAAa;AACf"}},
    {"offset": {"line": 99, "column": 0}, "map": {"version":3,"sources":["file:///Users/ayanosman/dev-portfolio/estimator/app/api/enhance-blueprint/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\nimport { callOpenRouter, MODELS } from \"@/lib/ai/openrouter\";\n\nconst enhancementPrompts: Record<string, { system: string; user: string }> = {\n  \"target-audience\": {\n    system: `You are a product strategist helping identify target users. Be practical and insightful. Use markdown formatting for clear structure.`,\n    user: `Project: {description}\n\nBlueprint Summary: {summary}\nKey Features: {features}\n\nAnalyze the target audience for this project. Use structured markdown with headings and bullet points.\n\nFormat your response like this:\n\n## Primary User Personas\nCreate 2-3 specific user personas with names and characteristics\n\n## Demographics & Characteristics\n- List key demographic details\n- User behaviors and preferences\n- Technical proficiency levels\n\n## Pain Points & Solutions\nDetail the main problems this app solves for each persona\n\n## Why They'd Choose This\n- Key differentiators from alternatives\n- Unique value propositions\n- Specific benefits for each persona\n\nBe detailed and specific. Use \"you\" and \"your\" when addressing the user.`\n  },\n\n  \"monetization\": {\n    system: `You are a business advisor specializing in SaaS and app monetization. Be strategic and practical. Use markdown formatting for clear structure.`,\n    user: `Project: {description}\n\nBlueprint Summary: {summary}\nKey Features: {features}\n\nSuggest monetization strategies for this app. Use structured markdown with clear headings and lists.\n\nFormat your response like this:\n\n## Revenue Model Options\n\n### 1. [Model Name]\n**Description:** Brief explanation\n**Pros:**\n- List specific advantages for this app\n**Cons:**\n- List potential challenges\n**Best for:** When to choose this model\n\n### 2. [Model Name]\n(same format)\n\n### 3. [Model Name]\n(same format)\n\n## Recommended Pricing Strategy\nDetail your recommended approach with specific price points if applicable\n\n## Feature Gating Strategy\n**Free Tier:**\n- Features to keep free\n\n**Premium Tier:**\n- Features to gate behind payment\n\n**Reasoning:** Explain the strategy\n\nBe specific with actual price ranges and concrete examples. Use \"you\" and \"your\".`\n  },\n\n  \"mvp-comparison\": {\n    system: `You are a startup advisor helping someone decide on launch strategy. Be practical and encouraging. Use markdown formatting for clear structure.`,\n    user: `Project: {description}\n\nBlueprint Summary: {summary}\nKey Features: {features}\n\nCompare two launch approaches using structured markdown.\n\nFormat your response like this:\n\n## Quick Launch (MVP) ðŸš€\n\n**Timeline:** Estimated time to launch\n**Core Features:**\n- List 4-6 essential features only\n**Features to Skip (For Now):**\n- List nice-to-have features to defer\n\n**Benefits of This Approach:**\n1. Numbered list of advantages\n2. Why this works for validation\n\n**Best For:** When to choose this strategy\n\n## Perfect Launch (Full Build) âœ¨\n\n**Timeline:** Estimated time to launch\n**Complete Feature Set:**\n- List all features including polish and extras\n**Additional Investments:**\n- Design refinement\n- Advanced features\n- Additional integrations\n\n**Benefits of This Approach:**\n1. Numbered list of advantages\n2. When the investment pays off\n\n**Best For:** When to choose this strategy\n\n## Our Recommendation\nGive a clear recommendation based on the project type. Use \"you\" and \"your\".`\n  },\n\n  \"cool-features\": {\n    system: `You are a creative product designer brainstorming exciting features. Be imaginative but realistic and professional. Return ONLY valid JSON.`,\n    user: `Project: {description}\n\nBlueprint Summary: {summary}\nCurrent Features: {features}\n\nBrainstorm 4-6 creative features they might not have thought of. Return ONLY a JSON array with this exact structure:\n\n[\n  {\n    \"title\": \"Feature Name\",\n    \"description\": \"1-2 sentence explanation of why this would be valuable\",\n    \"category\": \"Enhancement\" or \"Innovation\" or \"User Experience\" or \"Analytics\"\n  }\n]\n\nFocus on:\n- Features that add real value\n- Unexpected but useful additions\n- Things that would differentiate the product\n- Practical future possibilities\n\nBe creative but professional. No emojis. Return ONLY the JSON array, nothing else.`\n  }\n};\n\nexport async function POST(request: NextRequest) {\n  try {\n    const { projectDescription, estimate, enhancementType } = await request.json();\n\n    if (!projectDescription || !estimate || !enhancementType) {\n      return NextResponse.json(\n        { error: \"Missing required fields\" },\n        { status: 400 }\n      );\n    }\n\n    const promptTemplate = enhancementPrompts[enhancementType];\n    if (!promptTemplate) {\n      return NextResponse.json(\n        { error: \"Invalid enhancement type\" },\n        { status: 400 }\n      );\n    }\n\n    // Format the prompt with actual data\n    const formatPrompt = (template: string) => {\n      return template\n        .replace(\"{description}\", projectDescription)\n        .replace(\"{summary}\", estimate.summary || \"\")\n        .replace(\"{features}\", Array.isArray(estimate.features) ? estimate.features.join(\", \") : \"\")\n        .replace(\"{techStack}\", estimate.techStack ? JSON.stringify(estimate.techStack) : \"\");\n    };\n\n    const systemPrompt = formatPrompt(promptTemplate.system);\n    const userPrompt = formatPrompt(promptTemplate.user);\n\n    // Use cheaper model for enhancements - GPT-3.5 Turbo is fast and cost-effective\n    const response = await callOpenRouter(\n      [\n        { role: \"system\", content: systemPrompt },\n        { role: \"user\", content: userPrompt },\n      ],\n      {\n        model: MODELS.GPT_35_TURBO, // Much cheaper than Claude Sonnet (~10x less)\n        temperature: 0.8,\n        max_tokens: 800,\n      }\n    );\n\n    let processedResponse = response.trim();\n\n    // For cool-features (JSON), strip markdown code blocks\n    if (enhancementType === 'cool-features') {\n      processedResponse = processedResponse.replace(/```json\\s*/g, '').replace(/```\\s*/g, '');\n      console.log(\"Cleaned cool-features response:\", processedResponse);\n    }\n    // For other enhancement types, keep the markdown formatting but clean up code blocks if present\n    else {\n      processedResponse = processedResponse.replace(/```markdown\\s*/g, '').replace(/```\\s*/g, '');\n    }\n\n    return NextResponse.json({ enhancement: processedResponse });\n  } catch (error) {\n    console.error(\"Error generating enhancement:\", error);\n    return NextResponse.json(\n      { error: \"Failed to generate enhancement. Please try again.\" },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,MAAM,qBAAuE;IAC3E,mBAAmB;QACjB,QAAQ,CAAC,qIAAqI,CAAC;QAC/I,MAAM,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;wEAyB6D,CAAC;IACvE;IAEA,gBAAgB;QACd,QAAQ,CAAC,8IAA8I,CAAC;QACxJ,MAAM,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;iFAqCsE,CAAC;IAChF;IAEA,kBAAkB;QAChB,QAAQ,CAAC,+IAA+I,CAAC;QACzJ,MAAM,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;4EAwCiE,CAAC;IAC3E;IAEA,iBAAiB;QACf,QAAQ,CAAC,2IAA2I,CAAC;QACrJ,MAAM,CAAC;;;;;;;;;;;;;;;;;;;;;kFAqBuE,CAAC;IACjF;AACF;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,EAAE,kBAAkB,EAAE,QAAQ,EAAE,eAAe,EAAE,GAAG,MAAM,QAAQ,IAAI;QAE5E,IAAI,CAAC,sBAAsB,CAAC,YAAY,CAAC,iBAAiB;YACxD,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAA0B,GACnC;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,iBAAiB,kBAAkB,CAAC,gBAAgB;QAC1D,IAAI,CAAC,gBAAgB;YACnB,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAA2B,GACpC;gBAAE,QAAQ;YAAI;QAElB;QAEA,qCAAqC;QACrC,MAAM,eAAe,CAAC;YACpB,OAAO,SACJ,OAAO,CAAC,iBAAiB,oBACzB,OAAO,CAAC,aAAa,SAAS,OAAO,IAAI,IACzC,OAAO,CAAC,cAAc,MAAM,OAAO,CAAC,SAAS,QAAQ,IAAI,SAAS,QAAQ,CAAC,IAAI,CAAC,QAAQ,IACxF,OAAO,CAAC,eAAe,SAAS,SAAS,GAAG,KAAK,SAAS,CAAC,SAAS,SAAS,IAAI;QACtF;QAEA,MAAM,eAAe,aAAa,eAAe,MAAM;QACvD,MAAM,aAAa,aAAa,eAAe,IAAI;QAEnD,gFAAgF;QAChF,MAAM,WAAW,MAAM,IAAA,2IAAc,EACnC;YACE;gBAAE,MAAM;gBAAU,SAAS;YAAa;YACxC;gBAAE,MAAM;gBAAQ,SAAS;YAAW;SACrC,EACD;YACE,OAAO,mIAAM,CAAC,YAAY;YAC1B,aAAa;YACb,YAAY;QACd;QAGF,IAAI,oBAAoB,SAAS,IAAI;QAErC,uDAAuD;QACvD,IAAI,oBAAoB,iBAAiB;YACvC,oBAAoB,kBAAkB,OAAO,CAAC,eAAe,IAAI,OAAO,CAAC,WAAW;YACpF,QAAQ,GAAG,CAAC,mCAAmC;QACjD,OAEK;YACH,oBAAoB,kBAAkB,OAAO,CAAC,mBAAmB,IAAI,OAAO,CAAC,WAAW;QAC1F;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,aAAa;QAAkB;IAC5D,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,iCAAiC;QAC/C,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAoD,GAC7D;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}