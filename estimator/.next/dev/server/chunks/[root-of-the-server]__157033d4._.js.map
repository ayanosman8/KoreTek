{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/ayanosman/dev-portfolio/estimator/lib/ai/openrouter.ts"],"sourcesContent":["/**\n * OpenRouter AI Client\n * Supports multiple models: Claude, GPT-4, Gemini, etc.\n */\n\nconst OPENROUTER_API_KEY = process.env.OPENROUTER_API_KEY || \"\";\nconst OPENROUTER_API_URL = \"https://openrouter.ai/api/v1/chat/completions\";\n\nexport interface OpenRouterMessage {\n  role: \"system\" | \"user\" | \"assistant\";\n  content: string;\n}\n\nexport interface OpenRouterOptions {\n  model?: string;\n  temperature?: number;\n  max_tokens?: number;\n}\n\n/**\n * Call OpenRouter API with any model\n */\nexport async function callOpenRouter(\n  messages: OpenRouterMessage[],\n  options: OpenRouterOptions = {}\n) {\n  const {\n    model = \"anthropic/claude-3.5-sonnet\", // Default to Claude 3.5 Sonnet\n    temperature = 0.7,\n    max_tokens = 4096,\n  } = options;\n\n  const response = await fetch(OPENROUTER_API_URL, {\n    method: \"POST\",\n    headers: {\n      Authorization: `Bearer ${OPENROUTER_API_KEY}`,\n      \"Content-Type\": \"application/json\",\n      \"HTTP-Referer\": process.env.NEXT_PUBLIC_SITE_URL || \"http://localhost:3001\",\n      \"X-Title\": \"KoreTek Project Estimator\",\n    },\n    body: JSON.stringify({\n      model,\n      messages,\n      temperature,\n      max_tokens,\n    }),\n  });\n\n  if (!response.ok) {\n    const error = await response.text();\n    throw new Error(`OpenRouter API error: ${error}`);\n  }\n\n  const data = await response.json();\n  return data.choices[0]?.message?.content || \"\";\n}\n\n/**\n * Available models on OpenRouter\n */\nexport const MODELS = {\n  // Claude models (Anthropic)\n  CLAUDE_35_SONNET: \"anthropic/claude-3.5-sonnet\",\n  CLAUDE_3_OPUS: \"anthropic/claude-3-opus\",\n  CLAUDE_3_HAIKU: \"anthropic/claude-3-haiku\",\n\n  // GPT models (OpenAI)\n  GPT_4_TURBO: \"openai/gpt-4-turbo\",\n  GPT_4: \"openai/gpt-4\",\n  GPT_35_TURBO: \"openai/gpt-3.5-turbo\",\n\n  // Google models\n  GEMINI_PRO: \"google/gemini-pro\",\n\n  // Meta models\n  LLAMA_2_70B: \"meta-llama/llama-2-70b-chat\",\n} as const;\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;AAED,MAAM,qBAAqB,QAAQ,GAAG,CAAC,kBAAkB,IAAI;AAC7D,MAAM,qBAAqB;AAgBpB,eAAe,eACpB,QAA6B,EAC7B,UAA6B,CAAC,CAAC;IAE/B,MAAM,EACJ,QAAQ,6BAA6B,EACrC,cAAc,GAAG,EACjB,aAAa,IAAI,EAClB,GAAG;IAEJ,MAAM,WAAW,MAAM,MAAM,oBAAoB;QAC/C,QAAQ;QACR,SAAS;YACP,eAAe,CAAC,OAAO,EAAE,oBAAoB;YAC7C,gBAAgB;YAChB,gBAAgB,6DAAoC;YACpD,WAAW;QACb;QACA,MAAM,KAAK,SAAS,CAAC;YACnB;YACA;YACA;YACA;QACF;IACF;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,QAAQ,MAAM,SAAS,IAAI;QACjC,MAAM,IAAI,MAAM,CAAC,sBAAsB,EAAE,OAAO;IAClD;IAEA,MAAM,OAAO,MAAM,SAAS,IAAI;IAChC,OAAO,KAAK,OAAO,CAAC,EAAE,EAAE,SAAS,WAAW;AAC9C;AAKO,MAAM,SAAS;IACpB,4BAA4B;IAC5B,kBAAkB;IAClB,eAAe;IACf,gBAAgB;IAEhB,sBAAsB;IACtB,aAAa;IACb,OAAO;IACP,cAAc;IAEd,gBAAgB;IAChB,YAAY;IAEZ,cAAc;IACd,aAAa;AACf"}},
    {"offset": {"line": 99, "column": 0}, "map": {"version":3,"sources":["file:///Users/ayanosman/dev-portfolio/estimator/lib/ai/estimator.ts"],"sourcesContent":["import { callOpenRouter, MODELS } from \"./openrouter\";\nimport type { ProjectEstimate } from \"./types\";\n\n/**\n * Generate a project estimate from a user's description\n */\nexport async function generateProjectEstimate(\n  projectDescription: string\n): Promise<ProjectEstimate> {\n  const systemPrompt = `You are an expert software development consultant who creates feature-focused, actionable blueprints for modern applications.\n\nCRITICAL: Return ONLY valid JSON. No markdown, no code blocks, no explanatory text. Just the raw JSON object.\n\nIMPORTANT NAMING GUIDELINES:\n- Create a CREATIVE, BRANDABLE app name (like \"TasteTrail\", \"Snapify\", \"Chatly\")\n- NOT descriptive names (avoid \"Personal Restaurant Journal\", \"Chat Application\")\n- Think like a real app in the App Store - catchy, memorable, unique\n- Maximum 2 words, easy to say and remember\n\nSUMMARY GUIDELINES:\n- Focus on WHAT USERS CAN DO, not technical implementation\n- Highlight the core value proposition and main capabilities\n- Keep it concise (2-3 sentences max)\n- Example: \"TasteTrail lets food lovers discover, save, and share restaurant experiences. Users can log meals with photos, get AI-powered recommendations, and connect with fellow foodies.\"\n- NOT: \"A full-stack application built with Next.js that provides restaurant tracking functionality using PostgreSQL database.\"\n\nIMPORTANT: Always recommend the MOST MODERN and CUTTING-EDGE technologies available in 2025:\n\nTech Stack Preferences:\n- Frontend: Next.js 15+, React 19, TypeScript, Tailwind CSS v4\n- Backend API:\n  * Simple APIs: Next.js API Routes\n  * Type-safe APIs: tRPC (highly recommended for full-stack Next.js)\n  * High-performance/Edge: Hono (ultra-fast, edge-ready)\n  * AVOID: Express, Fastify (outdated for modern apps)\n- Database: PostgreSQL, MySQL (actual database engines - NOT services like Supabase)\n- ORM: Prisma, Drizzle ORM (database tools)\n- Auth: Clerk, Supabase Auth, Auth.js/NextAuth\n- Services: Resend (email), Stripe (payments), Uploadthing (storage)\n- Infrastructure: Vercel, Railway, Fly.io (hosting platforms)\n- Mobile: React Native with Expo, or native Swift/Kotlin\n\nBACKEND SELECTION GUIDE:\n- For simple CRUD with Next.js: Next.js API Routes\n- For type-safe full-stack: tRPC (best choice for most apps)\n- For edge/serverless performance: Hono\n- Consider suggesting multiple: [\"tRPC\", \"Hono\"] for flexibility\n\nIMPORTANT CATEGORIZATION:\n- \"frontend\": UI frameworks only (React, Next.js, TypeScript, Tailwind)\n- \"backend\": API frameworks only (Next.js API Routes, tRPC, Hono)\n- \"database\": Actual database + ORM (PostgreSQL, Prisma ORM)\n- \"auth\": Authentication services (Clerk, Supabase Auth, Auth.js)\n- \"services\": Third-party services (Resend, Stripe, Uploadthing, etc.)\n- \"infrastructure\": Hosting/deployment (Vercel, Railway, Supabase platform)\n\nYour response must be a valid JSON object with this exact structure:\n{\n  \"projectName\": \"Suggested project name\",\n  \"summary\": \"2-3 sentence FEATURE-FOCUSED summary highlighting the core capabilities users will get\",\n  \"features\": [\n    {\n      \"name\": \"User Authentication\",\n      \"description\": \"Secure signup/login with email and Google OAuth\",\n      \"tier\": \"free\",\n      \"tech\": {\n        \"packages\": [\"@clerk/nextjs\", \"next-auth\"],\n        \"services\": [\"Clerk\", \"Supabase Auth\"]\n      },\n      \"resources\": []\n    },\n    {\n      \"name\": \"Real-time Chat\",\n      \"description\": \"Users can send messages and see responses instantly\",\n      \"tier\": \"pro\",\n      \"tech\": {\n        \"packages\": [\"socket.io-client\", \"pusher-js\"],\n        \"services\": [\"Pusher\", \"Ably\"]\n      },\n      \"resources\": []\n    }\n  ],\n  \"techStack\": {\n    \"frontend\": [\"Next.js 15\", \"React 19\", \"TypeScript\", \"Tailwind CSS\"],\n    \"backend\": [\"tRPC\", \"Hono\"],\n    \"database\": [\"PostgreSQL\", \"Prisma ORM\"],\n    \"auth\": [\"Clerk\"],\n    \"payment_apis\": [\"Stripe\", \"PayPal\"],\n    \"ai_apis\": [\"OpenAI\", \"Anthropic\"],\n    \"services\": [\"Resend\", \"Uploadthing\"],\n    \"infrastructure\": [\"Vercel\"]\n  },\n  \"risks\": [\"Concise technical risk 1\", \"Concise technical risk 2\"],\n  \"nextSteps\": [\n    \"Create Next.js project with TypeScript and Tailwind CSS\",\n    \"Set up Clerk for authentication (signup/login)\",\n    \"Design database schema in Prisma (users, posts tables)\",\n    \"Deploy to Vercel and configure environment variables\",\n    \"Implement core feature components\",\n    \"Set up Stripe for payment processing\"\n  ],\n  \"questions\": [\n    \"Simple yes/no question?\",\n    { \"text\": \"Question with specific options?\", \"options\": [\"Option 1\", \"Option 2\", \"Option 3\"] }\n  ]\n}\n\nNOTE: Backend should typically include tRPC for type safety. Add Hono for edge/performance needs.\n\nIMPORTANT FEATURES STRUCTURE:\n- Generate 5-8 CORE USER-FACING features (NOT technical tasks)\n- Focus on WHAT THE USER CAN DO, not how it's built\n- Each feature is a capability or action users can perform\n- Examples: \"User Authentication\", \"Real-time Chat\", \"File Upload\", \"Payment Processing\"\n- NOT: \"Database Setup\", \"API Routes\", \"State Management\"\n- Include specific packages and services needed for implementation\n- Mark features as \"free\" or \"pro\" tier based on value/complexity\n- Descriptions should be user-centric: \"Users can upload and share images\" NOT \"Implements S3 upload\"\n\nEach feature should follow this structure:\n{\n  \"name\": \"Feature Name (2-4 words, user-facing capability)\",\n  \"description\": \"Clear 1-sentence user-centric description of what users can do\",\n  \"tier\": \"free\" OR \"pro\",\n  \"tech\": {\n    \"packages\": [\"Exact npm package names like '@clerk/nextjs', 'uploadthing', 'stripe'\"],\n    \"services\": [\"Third-party services like 'Clerk', 'Supabase', 'Stripe', 'Vercel'\"]\n  },\n  \"resources\": []\n}\n\nFEATURE TIER GUIDELINES:\n- \"free\": Basic functionality, essential for core experience\n- \"pro\": Advanced features, premium capabilities, heavy API usage\n\nFocus on technical depth - developers need to know EXACTLY what packages/APIs to use.\n\nIMPORTANT FOR NEXT STEPS:\nGenerate 5-8 PRACTICAL, ACTIONABLE next steps that a developer can immediately execute.\nEach step should be a concrete task, not a vague suggestion. Examples:\n- \"Set up Supabase project and configure authentication\"\n- \"Design database schema with users, posts, and comments tables\"\n- \"Install and configure Clerk for user authentication\"\n- \"Create Next.js project with TypeScript and Tailwind CSS\"\n- \"Set up Stripe account and configure payment webhooks\"\n- \"Deploy to Vercel and configure environment variables\"\n- \"Implement responsive navigation component\"\n- \"Set up tRPC router for type-safe API endpoints\"\n\nFocus on SETUP, INFRASTRUCTURE, and CORE IMPLEMENTATION tasks in a logical order.\n\nIMPORTANT FOR QUESTIONS:\n- For simple yes/no questions, use strings: \"Do you need offline support?\"\n- For questions with specific choices, use objects with options:\n  { \"text\": \"Preferred platform?\", \"options\": [\"Mobile\", \"Web\", \"Both\"] }\n- Always provide 2-4 specific options when the answer isn't a simple yes/no\n- Keep options SHORT and SIMPLE (e.g., \"Mobile\", \"Web\", \"Both\" not \"Mobile first\", \"Web only\", \"Both equally important\")\n- Options should be clear, specific, and mutually exclusive\n\nFocus on providing detailed features, modern tech stack recommendations, identifying potential risks, and practical next steps.`;\n\n  const userPrompt = `Project Description: \"${projectDescription}\"\n\nPlease analyze this project and provide a comprehensive estimate in JSON format.`;\n\n  try {\n    const response = await callOpenRouter(\n      [\n        { role: \"system\", content: systemPrompt },\n        { role: \"user\", content: userPrompt },\n      ],\n      {\n        model: MODELS.CLAUDE_35_SONNET,\n        temperature: 0.7,\n        max_tokens: 1200,\n      }\n    );\n\n    // Remove markdown code blocks if present\n    let cleanedResponse = response.trim();\n    cleanedResponse = cleanedResponse.replace(/```json\\s*/g, '').replace(/```\\s*/g, '');\n\n    // Parse JSON from response\n    const jsonMatch = cleanedResponse.match(/\\{[\\s\\S]*\\}/);\n    if (!jsonMatch) {\n      console.error(\"Failed to extract JSON. Raw response:\", response);\n      console.error(\"Cleaned response:\", cleanedResponse);\n      throw new Error(\"Failed to extract JSON from AI response\");\n    }\n\n    const estimate: ProjectEstimate = JSON.parse(jsonMatch[0]);\n    return estimate;\n  } catch (error) {\n    console.error(\"Error generating estimate:\", error);\n    throw new Error(\"Failed to generate project estimate\");\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;;AAMO,eAAe,wBACpB,kBAA0B;IAE1B,MAAM,eAAe,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;+HAsJuG,CAAC;IAE9H,MAAM,aAAa,CAAC,sBAAsB,EAAE,mBAAmB;;gFAEe,CAAC;IAE/E,IAAI;QACF,MAAM,WAAW,MAAM,IAAA,2IAAc,EACnC;YACE;gBAAE,MAAM;gBAAU,SAAS;YAAa;YACxC;gBAAE,MAAM;gBAAQ,SAAS;YAAW;SACrC,EACD;YACE,OAAO,mIAAM,CAAC,gBAAgB;YAC9B,aAAa;YACb,YAAY;QACd;QAGF,yCAAyC;QACzC,IAAI,kBAAkB,SAAS,IAAI;QACnC,kBAAkB,gBAAgB,OAAO,CAAC,eAAe,IAAI,OAAO,CAAC,WAAW;QAEhF,2BAA2B;QAC3B,MAAM,YAAY,gBAAgB,KAAK,CAAC;QACxC,IAAI,CAAC,WAAW;YACd,QAAQ,KAAK,CAAC,yCAAyC;YACvD,QAAQ,KAAK,CAAC,qBAAqB;YACnC,MAAM,IAAI,MAAM;QAClB;QAEA,MAAM,WAA4B,KAAK,KAAK,CAAC,SAAS,CAAC,EAAE;QACzD,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,MAAM,IAAI,MAAM;IAClB;AACF"}},
    {"offset": {"line": 296, "column": 0}, "map": {"version":3,"sources":["file:///Users/ayanosman/dev-portfolio/estimator/app/api/generate-estimate/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\nimport { generateProjectEstimate } from \"@/lib/ai/estimator\";\n\nexport async function POST(request: NextRequest) {\n  try {\n    const { projectDescription } = await request.json();\n\n    if (!projectDescription || typeof projectDescription !== \"string\") {\n      return NextResponse.json(\n        { error: \"Project description is required\" },\n        { status: 400 }\n      );\n    }\n\n    if (projectDescription.length < 20) {\n      return NextResponse.json(\n        { error: \"Please provide a more detailed project description (at least 20 characters)\" },\n        { status: 400 }\n      );\n    }\n\n    // Generate estimate using OpenRouter + Claude\n    const estimate = await generateProjectEstimate(projectDescription);\n\n    return NextResponse.json({ estimate });\n  } catch (error) {\n    console.error(\"Error generating estimate:\", error);\n    return NextResponse.json(\n      { error: \"Failed to generate estimate. Please try again.\" },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,EAAE,kBAAkB,EAAE,GAAG,MAAM,QAAQ,IAAI;QAEjD,IAAI,CAAC,sBAAsB,OAAO,uBAAuB,UAAU;YACjE,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAkC,GAC3C;gBAAE,QAAQ;YAAI;QAElB;QAEA,IAAI,mBAAmB,MAAM,GAAG,IAAI;YAClC,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAA8E,GACvF;gBAAE,QAAQ;YAAI;QAElB;QAEA,8CAA8C;QAC9C,MAAM,WAAW,MAAM,IAAA,mJAAuB,EAAC;QAE/C,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE;QAAS;IACtC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAiD,GAC1D;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}