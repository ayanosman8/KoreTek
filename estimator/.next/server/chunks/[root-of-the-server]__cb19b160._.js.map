{"version":3,"sources":["../../../lib/ai/openrouter.ts"],"sourcesContent":["/**\n * OpenRouter AI Client\n * Supports multiple models: Claude, GPT-4, Gemini, etc.\n */\n\nconst OPENROUTER_API_KEY = process.env.OPENROUTER_API_KEY || \"\";\nconst OPENROUTER_API_URL = \"https://openrouter.ai/api/v1/chat/completions\";\n\nexport interface OpenRouterMessage {\n  role: \"system\" | \"user\" | \"assistant\";\n  content: string;\n}\n\nexport interface OpenRouterOptions {\n  model?: string;\n  temperature?: number;\n  max_tokens?: number;\n}\n\n/**\n * Call OpenRouter API with any model\n */\nexport async function callOpenRouter(\n  messages: OpenRouterMessage[],\n  options: OpenRouterOptions = {}\n) {\n  const {\n    model = \"anthropic/claude-3.5-sonnet\", // Default to Claude 3.5 Sonnet\n    temperature = 0.7,\n    max_tokens = 4096,\n  } = options;\n\n  const response = await fetch(OPENROUTER_API_URL, {\n    method: \"POST\",\n    headers: {\n      Authorization: `Bearer ${OPENROUTER_API_KEY}`,\n      \"Content-Type\": \"application/json\",\n      \"HTTP-Referer\": process.env.NEXT_PUBLIC_SITE_URL || \"http://localhost:3001\",\n      \"X-Title\": \"KoreTek Project Estimator\",\n    },\n    body: JSON.stringify({\n      model,\n      messages,\n      temperature,\n      max_tokens,\n    }),\n  });\n\n  if (!response.ok) {\n    const error = await response.text();\n    throw new Error(`OpenRouter API error: ${error}`);\n  }\n\n  const data = await response.json();\n  return data.choices[0]?.message?.content || \"\";\n}\n\n/**\n * Available models on OpenRouter\n */\nexport const MODELS = {\n  // Claude models (Anthropic)\n  CLAUDE_35_SONNET: \"anthropic/claude-3.5-sonnet\",\n  CLAUDE_3_OPUS: \"anthropic/claude-3-opus\",\n  CLAUDE_3_HAIKU: \"anthropic/claude-3-haiku\",\n\n  // GPT models (OpenAI)\n  GPT_4_TURBO: \"openai/gpt-4-turbo\",\n  GPT_4: \"openai/gpt-4\",\n  GPT_35_TURBO: \"openai/gpt-3.5-turbo\",\n\n  // Google models\n  GEMINI_PRO: \"google/gemini-pro\",\n\n  // Meta models\n  LLAMA_2_70B: \"meta-llama/llama-2-70b-chat\",\n} as const;\n"],"names":[],"mappings":"k/BAKA,IAAM,EAAqB,QAAQ,GAAG,CAAC,kBAAkB,EAAI,GAiBtD,eAAe,EACpB,CAA6B,CAC7B,EAA6B,CAAC,CAAC,EAE/B,GAAM,OACJ,EAAQ,6BAA6B,aACrC,EAAc,EAAG,YACjB,EAAa,IAAI,CAClB,CAAG,EAEE,EAAW,MAAM,MAAM,AA1BJ,gDA0BwB,CAC/C,OAAQ,OACR,QAAS,CACP,cAAe,CAAC,OAAO,EAAE,EAAA,CAAoB,CAC7C,eAAgB,mBAChB,eAAgB,CAAA,uBAChB,IADoD,MACzC,2BACb,EACA,KAAM,KAAK,SAAS,CAAC,CACnB,iBACA,cACA,aACA,CACF,EACF,GAEA,GAAI,CAAC,EAAS,EAAE,CAAE,CAChB,IAAM,EAAQ,MAAM,EAAS,IAAI,EACjC,OAAM,AAAI,MAAM,CAAC,sBAAsB,EAAE,EAAA,CAAO,CAClD,CAEA,IAAM,EAAO,MAAM,EAAS,IAAI,GAChC,OAAO,EAAK,OAAO,CAAC,EAAE,EAAE,SAAS,SAAW,EAC9C,iBAKsB,CAEpB,iBAAkB,8BAClB,cAAe,0BACf,eAAgB,2BAGhB,YAAa,qBACb,MAAO,eACP,aAAc,uBAGd,WAAY,oBAGZ,YAAa,6BACf"}